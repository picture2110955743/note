> 介绍：shell(终端或壳)，作用是人与内核(硬件)之间的翻译官。用户把命令告诉终端，他就会调用相应的程序去完成某些工作，现在主流的linux系统使用的终端Bash(Bourne-Again SHell)终端包括红帽。

> - Linux非视图终端：ctrl+alt+f1【系统回到视图桌面，没有安装视图界面此按键无效】
> - Linux返回视图终端：ctrl+alt+f7【回到非视图界面】

> ```
> [用户名@主机名 地址]#|$ 命令名称 [命令参数] [命令对象] 
> ```
>
> - 之间用空格隔开，Linux命令区分大小写。
> - 命令参数 用-- 或 - 作为前缀， --后是完整的参数名 -后面是参数名的首字母
>
> ```
> 例子：[root@localhost-]# 
> ```
>
> root【当前用户名称】、localhost【主机名称】
>
> ~【家目录】、/【根目录】：因为Linux是单根操作系统，所以没有盘符名称
>
> \#【当前用户为超级用户】、$【当前用户为普通人】



## 一.系统查看状态命令

### 1.显示登陆用户(who...)

- 显示所有用户名称和登录时间【who】
- 只显示当前用户名称和登录时间【who am i】
- 只显示当前用户名【whoami】

### 2.时间命令和时区(date)

介绍：只执行date命令显示系统时间。

```
date [-d] [+格式化字符串]
```

- 格式化字符串：通过特定的字符串标记，来控制显示的日期格式：

  【%Y】年 【%y】年份后两位数 【%m】月份 【%d】日  【%j】一年中的第几天

  【%H】小时(24小时制)【%I】小时(12小时制)

  【%M】分钟 【%S】秒钟 【%s】自1970-1-1 0:00 UTC 到现在的秒数

  > 例子1：
  >
  > ![](C:\Users\leng\Desktop\第四代笔记\assc\Linux\1.png) 

  > 例子2：输入日期和时间格式化的时候，如果两边之间有空格则会把第二个格式字符串当成参数报错，解决方法可以使把他们写在字符串中
  >
  > ![](C:\Users\leng\Desktop\第四代笔记\assc\Linux\2.png) 

- 参数：【-d】可以按照给定的字符串显示日期，一般用于日期计算可以和格式化字符串配合使用

  其中支持的字符标志有：

  【year】年 【manth】月 【day】天 【hour】小时 【minute】分钟 【second】秒

  > 例子1：在当前日期加上1年
  >
  > ![](C:\Users\leng\Desktop\第四代笔记\assc\Linux\3.png) 

  > 例子2：在当前日期减去一年，加上一天，并用格式化字符串显示
  >
  > ![ ](C:\Users\leng\Desktop\第四代笔记\assc\Linux\4.png) 

时区：

介绍：通过date产看的日期是不准确的，系统默认时区非中国东八区，修改时区需要root权限。

将系统自大的localtime文件伤处并将/usr/share/zoneinfo/Asia/Shanghai文件链接为/etc/localtime即可

```linux
rm -f etc/localtime
ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```

> 时间校准：可以通过ntp程序自动校准时间，需要提前安装。命令：yum -y install ntp
>
> 启动并设置开机自启：
>
> - systemctl start ntpd
> - systemctl enable ntpd
>
> 启动后会定期帮助我们联网校准系统时间
>
> - 如果觉得自动校准太慢也可以手动校准（需要root）：ntpdate -u ntp.aliyum.com
> - 通过阿里云提供服务网址配合ntpdate（安装ntp后会自带这个命令）

### 3.显示日历(cal)

```
cal
```

### 4.终端输出内容(echo)

- 将参数输入到屏幕中，参数是什么就输出什么

  ```
  echo [参数]
  ```

### 5.帮助命令(man、help)

- 参数就是命令名，进入介绍命令的说明书，按q退出

  ```
  man [参数]
  ```

- 参数是命令名，查看命令的帮助。

  ```
  [参数]--help
  ```

### 6.命令来源(infor、whatis)

- 查看命令的来源、功能、选项等信息，按q退出。

  ```
  info [参数]
  ```

- 参数就是命令，查看命令的用途。

  ```
  whatis [参数]
  ```

### 7.清除屏幕内容(clear)

介绍：清除命令窗口上面的历史命令

```linux
clear
```

## 二.目录和文件的操作命令

### 1.显示当前的路径(pwd)

介绍：显示当前所在的绝对路径

```linux
pwd
```

### 3.显示目录内容(ls)

介绍：显示目录下的文件和其目录，默认不显示父目录等信息。

```linux
ls [参数]
```

> 参数：
>
> 【-a】显示所有目录，包括.开头的隐藏目录、父目录和当前目录。
>
> 【-l】描述文件详细信息，包括权限、所有者、大小、创建时间等。
>
> 【-al】显示所有文件的包括父目录等的详细信息。
>
> 【-r】将文件以相反次序显示（原定依英文字母次序）

### 3.进入指定目录(cd [参数])

```
cd [参数] 
```

> 参数：直接输入指定目录也行。
>
> 【/】进入根目录地址。	【~】进入家目录地址。
>
> 【.】进入当前目录。		【..】进入上级目录。

### 4.创建文件(touch [参数])

介绍：创建普通的文件。

```
touch [参数]
```

### 5.创建目录(mkdir [参数])

```
mkdir [-p] [目录]
```

> 【-p】确保目录名称存在，不存在就创建一个。
>
> 默认只能创建单级目录，创建多级目录就得加上参数，目录之间用“/”隔开。

### 6.删除目录(rmdir [参数])

介绍：删除单级或多级空的目录，只能删除空目录

```
rmdir [参数]
```

### 7.复制目录文件(cp..)

介绍：把文件和文件夹复制到指定位置，并重新命名（不想改名就起原名）

```
cp [-r] [源目录或文件名] [目标目录或新文件名]
```

> 【-r】默认只能复制文件，加上这个参数可以复制文件夹（只写地址不更新名称不会更名)
>
> 【-f】强制覆盖文件。【-i】询问要不要覆盖文件，输入y代表同意复制

### 8.移动目录文件(mv..)

介绍：移动文件并改名然后删除源文件

```
mv [参数] [源目录或文件名] [目标目录或新文件名]
```

> 【-f】强制覆盖文件。【-i】询问要不要覆盖文件，输入y代表同意复制
>
> 其他操作：可以把文件移动到当前页面并改名起到改名的效果

### 9.强行删除文件目录(rm)

介绍：强行删除文件和文件夹

```
rm [参数] [目标路径/文件名]
```

> 参数：
>
> 【-r】将目录及以下之档案亦逐一删除
>
> 【-f】即使原档案属性设为唯读，亦直接删除，无需逐一确认
>
> 【-rf】强行删除目录和文件（听说删库跑路就用这个）

### 10.文件查找(find)

介绍：find命令按不同的参数去查找系统中符合条件的文件，并将文件路径显示到终端窗口

```linux
find [路径] [参数] [参数值]
```

> 参数：
>
> 【-name】可以按文件名称去查找，参数值可以使用通配符，是字符串类型。?代表单个字符，*代表多个字符
>
> 【-type】可以按照文件类型去查找，f 普通文件、d目录文件、c 字符设备文件、b块设备文件、 s 套接字文件、p 管道文件、l 连接文件。
>
> -user  -group  -nouser  -nogroup  -uid -gid  可以按照用户和组的信息来查找
>
> 介绍：路径默认是当前路径

```
//查找系统中所有的管道文件。
find / -type p  
//查找系统中所有zhangSan用户的文件。
find / -user zhangSan
```

### 11.创建软连接(ln)

介绍：在系统中创建软连接，可以将文件、文件夹连接到其他位置，类似于Windows中的快捷键

```
ln -s 参数1 参数2
```

> 【-s】创建软连接 【参数1】被链接的文件或文件夹 【参数2】要链接去的目的地

注意：参数2目标地址中如果有文件夹，该文件夹必须提前存在，ln命令不能创建文件夹

## 三.文件类型和内容操作命令

介绍：执行ls  -lh命令，在显示的文件信息中，每行的第一个字符标示了文件的类型，[参考文件](https://blog.csdn.net/rong09_13/article/details/79233956)。

- 普通文件

  【-】首字符为这个表示普通文件。

  【d】首字符表示是目录

- 设备文件

  > 介绍：设备文件是用于为操作系统与设备提供连接的一种文件。在Linux系统中将设备作为文件来处理，操作设备就像是操作普通文件一样。每一个设备对应一个设备文件，存放在 /dev 目录中。

  【c】字符设备文件

  > 字符设备是指在I/O传输过程中以字符为单位进行传输的设备，例如键盘，打印机等。

  【b】块设备文件

  > 表示文件是面向块的设备(磁盘、软盘或磁带)，块文件通常类似于磁盘设备(在数据能够被访问的地方赋予一个块号，意味着同时设定了一个块缓存)

- 其他文件

  【s】套接字文件

  > 这类文件通常用在网络数据连接。可以启动一个程序来监听客户端的要求，客户端就可以通过套接字来进行数据通信，最常在 /var/run目录中看到这种文件类型。

  【p】管道文件

  > 管道分为无名管道和有名管道两种管道,管道文件是建立在内存之上可以同时被两个进程访问的文件（通讯传递数据

  【l】链接文件

  > 等同于windows中的超级链接文件，快捷方式

### 1.查看文件内容(cat..)

```linux
cat [-n][文件名]
```

> 介绍：用命令的方式查看文件的内容。
>
> 参数：
>
> 【-n】输出内容的时候显示行号，行号并不存在文件里面且默认不显示。

### 2.倒看内容(tac..)

介绍：和cat一样，只不过内容倒叙输出显示

```
tac [文件名]
```

### 3.翻页查看内容(more..)

```linux
more [参数] [文件名]
```

> 介绍：可以分页查看内容
>
> 参数：
>
> 【-num】一次性显示的行数num是数字
>
> 【+num】从第几行开始显示
>
> 操作：
>
> 【Enter】向下n行(需要定义),默认1行
>
> 【空格 或 Ctrl+F】向下滚动一屏
>
> 【Ctrl+B】向上滚动一屏
>
> 【q】退出

### 4.查找文件内容(less)

介绍：可以查找文件里面的内容

```
less [文件名] 
```

> 输入要查找的内容：
>
> /【后面输入要查的内容，从前向后查】
>
> ?【后面输入要查的内容，从后向前查】
>
> 操作：
>
> 回车【滚动一行】、空格 【滚动一页】
>
> n【查看下一个】、N【查看上一个】、q【退出】

### 5.查看开头内容(head)

```
head [-n] [文件名]
```

> 介绍：从头查看指定行数的内容，默认显示十行。
>
> 参数：
>
> 【-n】-n后面紧跟着数字，指定看多少行。
>
> 【-q】隐藏文件名 【-v】显示文件名 【-c】显示字节数

### 6.查看尾部文件内容(tail)

```
tail [-n] [文件名]
```

> 介绍：从尾查看文件内容，默认显示十行，参数和head命令一样。
>
> 注意：虽然是从尾部输出，但是顺序还是按原文的顺序，不会倒着输出。

### 7.查看指定的列(cut)

- 产看指定的列

  ```
  cut [参数] [文件名]
  ```

  参数：

  - (-d[符号])：后面指定分隔符，表示用什么符号将一行字分开，需要配合-f参数使用
  - (-f[数字])：取出第几列，显示多列可以用","分开，显示连续的列可以用”-“分开，其中-n表示从第一列开始
  - (-c[数字])：表示取出每行中的第几个字符

  取出数字范围：

  - num：查看指定的列
  - num,num：查看多个指定的列
  - num-num：查看num到num的列
  - -num：查看第1列到指定num的列

### 8.排序命令(sort)

```
sort [参数] [文件名]
```

- -t【后面紧跟着分隔符，文本以分隔符进行分割】
- -k【指定排序列后面跟着数字，排序列前面的不参与排序】
- -n【指定按照数值大小排序】
- -u【排序后不显示重复项】
- -r【反向排序】

### 9.动态查看内容(tail)

介绍：

```
tail -f [文件名]
```

- -f:循环读取，一个文件不停被修改查看后只会显示静态的信息，后面被修改的内容就看不到了，使用这个命令查看就可以修改一次查看一次。
- 例子：使用 ping 127.0.0.1>>文件名。打开另一个终端，输入tail -f 文件名就可以看到了。

### 10.管道符和连接符

（1）管道符【|】

介绍：当多个命令用在同一个文件上面，可以使用管道符将命令写在一行并用符号分开，执行完第一命令后，第二个命令运行在第一个命令的结果之上。

> 例子：产看一个文件的2到4行(因为第一个命令指定了文件，第二个命令就不用指定了)
>
> ```linux
> head -2 1.txt|head -4
> ```

(2)链接符【; 、&& 、||】

- 【；】将多个命令写在一行，互不影响。
- 【&&】前面的命令执行成功才会执行后面的命令
- 【||】前面的命令不成功才会执行后面的命令

### 11.标准输出重定向

介绍：将文字写入文件中，如果文件不存在则会创建文件

【覆盖-覆盖原来的内容】>

【追加-在原内容后追加】>>

- 配合cat命令执行后：会进行输入内容编辑完按Ctrl+d退出，然后将输入的内容 覆盖或追加 到文件里。

  ```
  cat > [文件名]
  cat >> [文件名]
  ```

- 配合echo命令执行：将打印的内容直接 覆盖或追加 到文件里面。

  ```
  echo [内容] >[文件名]
  echo [内容] >>[文件名]
  ```

### 12.判断输出重定向

- 执行命令正确后将结果输入到文件。

  【覆盖】1>

  【追加】1>>

  ```linux
  [命令] 1> [文件]
  ```

- 执行命令错误后，将提示写入文件。

  【覆盖】2>

  【追加】2>>

  ```linux
  [命令] 2> [文件]
  ```

- 无论对错都会将结果覆盖在文件中

  介绍：命令无论对错返回值都覆盖文件原内容，可以用管道符配合其他命令使内容不停保存

  ```linux
  [命令]&> [文件]
  ```

### 13.内联重定向

- 将文件的内容输出到屏幕上

  ```
  cat < [文件]
  ```

- 介绍：不会给文件输入数据，只会将输入的数据打印在频幕上，只需要在<<后面输入指定的字符就可以开始输入了

  ```
  cat << [休止符]
  如果输入的字符和指定的字符一样将停止输出，然后将之前输入的字符打印到控制台上
  ```

## 四.用户介绍和管理命令

- Linux操作系统的用户分为以下三种

  - 根用户【这代表管理员账户，对系统的每个方面都有完全的权力】

    根用户在系统上有完全权限：可以修改和删除任何文件；可以运行任何命令；可以取消任何进程。根用户负责增加和保留其他用户、配置硬件、添加系统软件。虽然根用户可以在系统上的任何地方创建文件，他通常使用/root作为主目录。

  - 普通用户【代表着一个系统的真实用户】

    普通用户是使用系统的真实用户人群。普通用户通常把/bin/bash作为登录Shell和/home的子目录作为主目录。一般情况下，普通用户只在自己的主目录和系统范围内的临时目录里（如/tmp和/var/tmp）创建文件。在红帽企业版Linux中，普通用户的用户ID号通常大于等于500。

  - 系统用户【这些群组和账号是正确安装和更新系统软件所必需的】

    大多数Linux系统保留一系列低UID值用户作为系统用户。系统用户不代表人，而代表系统的组成部分。例如，处理电子邮件的进程经常以用户名mail来运行；运行Apache网络服务器的进程经常作为用户apache来运行。系统用户通常没有登录Shell，因为它们不代表实际登录的用户。同样，系统用户的主目录很少在/home中，而通常在属于相关应用的系统目录中。例如，用户apache的主目录是/var/www。在红帽企业版Linux中，系统用户的用户ID范围在1~499之间

- 红帽系统Linxi用户ID：【0根用户】【1~499系统用户】【500+普通用户】

### 1.查询用户(cat /etc/passwd)

>  /etc/passwd

介绍：在linux中，用户的相关信息都保存在该文件中，可以通过查询该文件来对用户进行查询。当创建一个新用户时信息也会保存到该文件末尾。

文件将每个用户的信息记录在文件中，每一行就代表一个用户，一行包含7个字段：

```
root:x:0:0:root:/root:/bin/bash
用户名:秘密:用户ID:群组ID:用户信息:家目录:Shell
```

【用户名 root】已创建用户的用户名，字符长度 1 个到 12 个字符

【密码 x】代表加密密码保存在 /etc/shadow 文件中

【用户id 0】代表用户的 ID 号，每个用户都要有一个唯一的 ID

【群组id 0】代表群组的 ID 号，每个群组都要有一个唯一的 GID ，保存在 /etc/group文件中

【用户信息 root】代表描述字段，可以用来描述用户的信息

【家目录 /root】代表用户的家目录。 root的家目录在/root，所以当root登陆的之后，就会立刻跑到/root目录里头，其它用户在登录后当前目录会在“/home/用户名” 这个目录中，linux用户默认的home名时自己的名称，可以修改，这样黑客登录的时候找不到用户的家目录

【shell bin/bash】代表用户使用的 shell 类型，就是终端窗口的类型

- 可以通过查看/etc/passwd文件内容查看用户相关信息：

  ```linux
  cat -n /etc/passwd|cut -d: -f1,3
  ```

### 2.添加用户(useradd)

- 创建用户时，系统修改一下4个文件：

  【/etc/passwd】用户账户的详细信息在此文件夹中更新

  【/etc/shadow】用户账户的秘密在此文件中更新

  【/etc/group】用户群组的详细信息在此文件中更i性能

  【etc/gshadow】新用户群组秘密在此文件中更新

- 组和附加组

  介绍：用户不论为与基本组中还是附加组中，就会拥有该组的权限，一个用户可以属于多个附加组，但是一个用户只能有一个基本组。

  【基本组】如果没有指定用户组，创建用户的时候系统会默认同时创建一个和这个用户名同名的组，这个组就是基本组，不可以把用户从基本组中删除

  【附加组】除了基本组之外，用户所在的其他组，都是附加组。. 用户是可以从附加组中被删除的

- useradd命令可以添加新用户到系统中

  ```linux
  useradd [参数] [用户名]
  ```

  > 参数：
  >
  > 【-d<登陆目录>】指定用户登陆时的起始目录
  >
  > 【-g<群组>】指定用户组号
  >
  > 【-G<群组>】指定用户附加组号
  >
  > 【-u<id>】指定用户id
  >
  > 【-c<备注>】指定用户的备注
  >
  > 【-s<sell>】指定用户登录后所使用的shell

  例子：添加名称为wangWu，指定家目录/home/wangWu、用户组号500、附加组号0、id号为520的用户

  ```linux
  useradd -d/home/wangWu -g500 -G0 -u520 wangWu
  ```

### 3.切换登陆用户(su)

```
su [-]用户名
```

> (1)有-是完全切换，即系统环境变量也会跟着同时切换，而没有-则是和上一个用户用着同一个环境变量
>
> (2)超级用户切换其他用户不用秘密，其他用户切换超级用户用密码(除非删除超级用户的密码)

```
//切换张三用户
su - zhangsan
```

### 4.修改密码(passwd)

```
passwd [参数] [用户名]
```

> 参数：
>
> 【-d】删除密码，该命令必须指定用户名
>
> 注意：省略用户名默认修改当前用户

```
//修改zhangsan的密码
passwd zhangsan
//删除zhangsan的秘密
passwd -d zhangsan
```

### 5.修改属性(usermod)

```linux
usermod [参数] [用户]
```

> 参数：
>
> 【-u<id>】修改用户的id
>
> 【-g<id>】修改用户的组id
>
> 【-L】锁定用户，被锁定的用户登录会失败，可以通过root用户切换到被锁的用户
>
> 【-U】解锁
>
> 【-d<目录>】修改用户登陆时的目录
>
> 【-c<备注>】修改用户备注的说明
>
> 【-G<id>】将会用户添加到附加组

```linux
//锁定用户张三
usermod -L zhangsan
```

### 6.删除用户(userdel)

```linux
userdel [-r][用户名]
```

> 参数：
>
> 【-r】删除用户家目录及其家目录中的子目录和文件
>
> 注意：如果不删除将留在当前目录中下次创建使用该目录会报错

```
userdel -r zhangsan
```

### 7.添加组(groupadd)

介绍：用于创建一个新的工作组，新工作组的信息将被添加到系统文件中

```
groupadd -g [组名]
```

> 参数：【-g】指定新建工作组的 id

### 8.修改组属性(groupmod)

介绍：可以修改组的id

```
groupmod -g [组名]
```

> 参数：【-g】指定修改工作组的 id

### 9.修改组秘密(groupdwd)

```
gpasswd [组名]
```

### 10.删除组(groupdel)

```
groupdel [组名]
```

### 11.修改所属主和组(chown)

- 使用ls -al 命令查看文件

  ```linux
  drwxr-xr-x   2   root  root  4.0k   Apr 2 22:21  bin
  文件权限	连接数 所属主 所属组 文件大小 最后修改的时间 文件名
  ```

  ```
  d       rwx       r-x       r-x
  文件类型 所属主权限u 所属组权限g 其他人o 
  ```

  > 【 r 】读：如果是目录则可以查看文件夹内容，文件则可以读取内容
  >
  > 【 w】写：如果是目录可以添加文件，文件则可以进行更改
  >
  > 【 x 】执行：如果是目录可以进入目录，如果是文件则可以执行文件
  >
  > 【 - 】没有认可权限

- 修改所属主

  ```linux
  chown [新用户名] [文件名]
  ```

- 修改所属组

  ```linux
  chown [:新组名] [文件名]
  ```

- 修改所有主和组

  ```linux
  chown [新用户主] [:新组名] [文件名]
  ```

  > 参数：【-R】修改目录下所有的子目录和文件进行修改

  ```linux
  //把1.txt的所著主改为zhagnsan，所属组改为zhangsan
  chown zhangsan .zhangsan 1.txt
  ```

### 12.修改权限(chmod)

（1）**修改权限**

介绍：每个部分都有r、w、x、-来代表读、写、执行、拒绝四种权限

- 修改所属主的权限-u

  ```
  chomod u=rwx [文件或目录]
  ```

- 修改所属组的权限-g

  ```
  chomod g=rwx [文件或目录]
  ```

- 修改其他用户的权限-o

  ```
  chomod o=rwx [文件或目录]
  ```

- 同时修改所属主、组、其他用户的权限

  ```
  chomod u=rwx,g=rwx,u=rwx [文件或目录]
  ```

- > 参数：【-R】对当前目录下所有目录和文件进行修改

（2）**数组赋权**

介绍：不同的权限值：r【4】、w【2】、x【1】、-【0】合起来为7

```
//修改文件，除了其他用户没有所有权限，给其他所属主和所属组给予所有全权限。
chomod 770 1.txt
```

## 五.系统命令

### 1.查看内存状况(free)

介绍：free是监控linux内存使用的命令

```
free [参数]
```

> 参数：
>
> 【-m】以MB为单位显示内存和交换区的状况，默认是KB为单位
>
> 【-s】可以实现在指定的时间段内不间断地监控内存的使用情况（ctrl+z）撤销

### 2.监控系统内存(vmsta)

介绍：vmstat 命令在监控系统内存方面的功能很强大，这里只介绍了部分

```
vmstat [时间间隔] [刷新次数]
```

### 3.查看磁盘状况(df)

介绍：显示磁盘的使用状况

```
df [参数]
```

> 参数：
>
> 【-m】以MB为单位显示，默认以KB为单位显示
>
> 【-h 】以GB为单位显示

### 4.统计文件大小(du)

介绍：统计目录或文件的大小和总的大小。

```
du [参数] [文件或目录]
```

> 参数：
>
> 【-h 】以K，M，G为单位显示文件大小
>
> 【-s 】仅仅显示总计大小，默认是分别显示目录下所有文件的大小
>
> 【-sh】以K为单位显示总计大小

### 5.静/动态查看进程(ps/top)

- 静态ps

  介绍：可以将进程的当前时刻的状态显示到端终

  ```linux
  ps
  ```

  > 参数：
  >
  > 【-A】列出所有的进程，跟-e相同
  >
  > 【-e】表示显示所有继承
  >
  > 【-f】显示进程所有信息
  >
  > 【-a】显示现行终端机下的所有进程，包括其他用户的进程
  >
  > 【-u】显示当前用户的进程
  >
  > 【-x】通常与 a 这个参数一起使用，可列出较完整信息

  列头含义：UID  进程的拥有者  、PID   进程号、PPID  父进程号、C    cpu 使用率、STIME  开始时间、TTY   终端、TIME  执行命令的时间、CMD  命令名

  ```linux
  //显示当前时刻的进程状态
  ps -ef
  //显示出当前系统中所有进程和进程的使用者以及无终端控制的进程
  ps -aux
  ```

- 动态top

  ```linux
  top
  ```

### 6.进程结束(kill)

介绍：命令可以杀死当前正在执行的进程。

```
kill [PID进程号]
```

## 六.文件压缩打包

### 1.zip和unzip

- zip：

  介绍：可以用来压缩文件，压缩后源文件默认还存在。压缩后的名称如果没有.zip后缀则会自动添加上。

  ```linux
  zip [参数] [压缩有名称] [要压缩的目录或文件]
  ```

  > 参数：
  >
  > 【-r】递归压缩，如果压缩文件夹可以把文件夹里面的内容一块压缩，赋值只压缩文件夹。
  >
  > 【-m】压缩后删除源文件
  >
  > 【-q】安静模式，在压缩的时候不会显示指令执行过程。

- unzip：

  介绍：用来接触压缩。

  ```linux
  unzip [参数] [压缩包] -d [目录]
  ```

  > 参数：
  >
  > 【-d】指定文件压缩后存储的目录
  >
  > 【-c】将解压的结果显示在屏幕上
  >
  > 【-v】执行时显示压缩文件的详细信息
  >
  > 【-q】安静模式

### 2.gzip和gunzip

- gzip：

  介绍：可以压缩指定的文件，压缩后原文件会消失【只能压缩文件，不能压缩目录】会生成gz的扩展名的压缩包，可以同时压缩多个文件压缩后也是分开存储。

  ```linux
  gzip [文件名]  [文件名]
  ```

  例子：

  ```linux
  gzip 1.txt 2.txt//会生成 1.txt.gz 和 2.txt.gz两压缩文件。
  ```

- gunzip:

  介绍：gunzip命令可以解压指定的文件，解压后压缩文件会消失。

  ```linux
  gunzip [压缩文件]
  ```

  例子：

  ```linux
  gunzip 1.txt.gztxt.gz压两个压缩文件。
  ```

### 3.bzip2和bunzip2

- bzip2:

  介绍：bzip2命令可以压缩指定的文件，压缩后原文件会消失，压缩文件的扩展名为.bz2

  ```linux
  bzip2 [参数] [文件]
  ```

  > 参数：
  >
  > 【-k】默认压缩后会删除源文件，加上-k参数后就不会删除源文件。

- bunzip2：

  介绍：命令可以解压指定的.bz2类型的压缩文件，解压后压缩文件会消失

  ```linux
  bunzip2 [压缩包名称]
  ```

### 4.tar打包

- tar

  介绍：命令可以将多个文件打到一个文件包中，并且可以在打包时选择压缩方式,最后生成tar扩展名的包

  ```linux
  tar [参数] [压缩包名] [文件列表]
  ```

  > 【-c】创建包
  >
  > 【-x】解压包
  >
  > 【-f】指定压缩文件名称（必写）
  >
  > 【-z】打包的同时用gzip压缩或者解包的同时用gunzip解压
  >
  > 【-j】打包的同时用bzip2压缩或者解包的同时用bunzip2解压
  >
  > 【-v】显示创建过程。
  >
  > 【-t】列出压缩内容
  >
  > 例子：【-zcvf】用gzip打包【-jcvf】用bzip2打包

- 例子1：用tar打包gzip格式压缩多个文件

  ```linux
  tar -zcvf one.tar 1.txt 2.txt
  ```

- 例子2:解压上面压缩的命令

  ```linux
  tar -zxvf one.tar
  ```

## 七.vim编辑器

介绍：vim是无视图情况下使用的文本编辑器，有的Linux自带有的没有。

模式：vim有三种模式：命令模式、编辑模式、末行模式。

启动：文件存在则打开文件，不存在则创建文件。有以下两种方法：

```linux
vim [文件名]
vi [文件名]
```

### 1.命令模式

介绍：打开vim默认就是进入该模式，在命令模式下可以对文件进行复制、剪切、粘贴、删除、撤销等操作。

- 基础操作

  【移动光标】上下左右方向键(推荐）或用h、j、k、l控制上下左右。

  【快速移动到行首和行尾】shift+6、shift+4

- 复制操作 - 命令直接在命令模式下直接输入字符就行

  【复制一个单词】yw

  【复制光标所在一整行】yy

  【复制多行】(num)yy ：(num)指定行数，如复制两行为2yy、四行为4yy

  【复制从当前光标所在字符到行尾】y$ 或 Y

- 剪切操作

  【剪切一个单词】yw

  【剪切光标所在一整行】dd

  【剪切多行】(num)dd：(num)指定行数。

  【剪切从当前光标所在字符到行尾】d$ 或 D

- 粘贴操作

  【将剪切板上的内容粘贴】p

- 删除操作

  【删除光标所在位置的字符，后面的字符往前填充】x

  【删除光标前的一个字符】X

- 撤销操作

  【撤销上一步操作】u

### 2.编辑模式

介绍：在编辑模式下，可以直接从键盘输入内容对文本进行修改，同时命令模式的命令将不再生效。

- 部分操作

  【进入编辑模式】insert键

  【退出编辑模式】ESC键

  【进入编辑模式  快速到行首】home键

  【进入编辑模式  快速到行尾 】end键

- 编辑模式两种状态 - 可以按住insert键来回切换。

  【INSERT(插入)】默认：输入内容将在光标选中的字符前插入，光标选中的字符往后退

  【REPLACE(替换)】输入一个字符，把光标选中的内容替换掉，然后光标往后移动一位

### 3.末行模式

介绍：在末行模式下，可以在编辑器的最后一行中通过命令完成保存、退出、查找、替换操作

注意：末行模式需要vim在命令模式下操作而不是编辑模式。

- 保存与退出

  【不保存退出】:q 【强制不保存退出】:q!

  【保存退出】:wq 【强制保存退出】:wq!

- 查找 - 从光标当前位置往后查找

  【输入/，然后在后面输入要查找的内容，然后按回车】【操作： n下一个，N上一个。】

- 替换

  :[范围]s/新/旧[/g]

  > 【/g】默认只能替换每行首个匹配的，添加上这个就可以把每行所有匹配的都替换。
  >
  > 【范围】默认是光标所在行。%表示整个文档。num1，num2表示第几行到第几行之间。+num表示第几行。-num表示倒数第几行。

  例子

  【在光标所在行内，将首个对应的旧字符换成新字符】:s/旧/新

  【在光标所在行内，将所有旧字符替换成新字符】:s/旧/新/g

  【在s前面添加上正数字，表示第几行】:4s/旧/新/g

  【在s前面添加上负数字，表示倒数第几行】:-4s/旧/新/g

  【在s前面加上%表示整个文档】:%s/旧/新/g

  【在s前面添加上，数字，数字可以指定第几行到第几行内】:1,10s/旧/新/g

  【他们之间可以相互配合使用】:5,$-5s/旧/新/g

### 4.后台运行Ctrl+z

- 解决方法

  【ctrl+z】推荐：终端直接输入fg这样就会重新回到vim编辑界面了。然后只要正常退出就可以了。

  【ls -a 一下，会看到隐藏的.swp文件 删除了此文件即可，然后再次vim打开文件就不会出现上述界面了】

- 这里要注意的进入编辑器后，如果不小心按到了ctrl+z 会发现编辑器退出到了终端窗口，ctrl+z是强制将vim的进程加入后台运行，会生成一个后缀为.swp到的文件，此时会从vim界面退出到终端界面。如果此时再用vi打开刚才的文件，那系统会提示这个文件在被编辑中。以后都会显示上面那个界面。

  ![](C:\Users\leng\Desktop\第四代笔记\assc\Linux\5.png)

## 十一.正则与grep命令

- 正则表达式（Regluar Expressions）又称规则表达式，这个概念最初是由Unix中的工具软件（如sed 和 grep）普及开的。正则表达式在代码中常简写为REs，regexes或regexp（regex patterns）。它本质上是一个小巧的、高度专用的编程语言。 许多程序设计语言都支持通过正则表达式进行字符串操作。

  【正则表达式 就是 规则表达式】

- 用途：正则表达式的主要应用对象是文本，使用正则表达式可以指定想要匹配的字符串规则，然后通过这个规则来匹配、查找、替换或切割那些符合指定规则的文本。总体来讲，正则表达式可以对指定的文本实现以下功能：

  - 匹配验证：  判断给定的字符串是否符合正则表达式所指定的过滤规则，从而可以判断某个字符串的内容是否符合特定的规则（如email地址、手机号码等）；当正则表达式用于匹配验证时，通常需要在正则表达式字符串的首部和尾部加上^和$，以匹配整个待验证的字符串。
  - 查找与替换： 判断给定字符串中是否包含满足正则表达式所指定的匹配规则的子串，如查找一段文本中的所包含的IP地址。另外，还可以对查找到的子串进行内容替换。
  - 字符串分割与子串截取： 基于子串查找功能还可以以符合正则表达式所指定的匹配规则的字符串作为分隔符对给定的字符串进行分割。

### 1、正则表达式的使用方法

- 正则表达式中有一系列的元字符来代表符合一定条件的字符。
- 正则表达式从左到右进行计算，并遵循优先级顺序，这与算术表达式非常类似。
- 相同优先级的从左到右进行运算，不同优先级的运算先高后低。下面从最高到最低说明了各种正则表达式运算符的
- 优先级顺序：
  - 运算符描述\转义符(), (?:), (?=), []圆括号和方括号*, +, ？, {n}, {n,}, {n,m}限定符^, $, \任何元字符、任何字符定位点和序列（即：位置和顺序）|替换，"或"操作
  - 字符具有高于替换运算符的优先级，使得"m|food"匹配"m"或"food"。若要匹配"mood"或"food"，请使用括号创建子表达式，从而产生"(m|f)ood"。

#### （1）普通常用元字符

| 元字符 | 功能                                       |
| ------ | ------------------------------------------ |
| .      | 匹配除了换行符以外的任意单个字符           |
| *      | 前导字符母线0次或连续多次                  |
| .*     | 任意长度字符                               |
| ^      | 行首（以...开头）                          |
| $      | 行尾（以...结尾）                          |
| ^$     | 空行                                       |
| []     | 匹配括号里任意单个字符或一组单个字符       |
| [^]    | 匹配不包含括号里任意单个字符或一组单个字符 |

例如：

- 匹配单个字符【l.ve】：love、live。
- 匹配单个字符0次或多次【lo.*se】：lose、loose。
- 匹配的内容：
  - []匹配一组字符中的任意一个【l[oi]ve】：love、live。
  - [a-z]和[A-Z]：匹配小写字母和匹配大写字母
  - [a-Z]：匹配小写字母和大写字母
  - [0-9]：匹配0到9之间的数字
  - [a-Z0-9]：数字和字母
  - [^0-9]：非数字

#### （2）其他常用元字符

| 元字符 | 功能                                       |
| ------ | ------------------------------------------ |
| <      | 取单词头                                   |
| >      | 取单词尾                                   |
| <>     | 精确匹配                                   |
| {n}    | 匹配前导字符连续出现n次                    |
| {n,}   | 匹配签到字符至少出现n次                    |
| {n,m}  | 匹配签到字符至少出现n次与m次之间           |
| （）   | 保存被匹配的字符                           |
| \d     | 匹配数字(grep -P) [0-9]                    |
| \w     | 匹配字母数字下划线(grep -P) [a-zA-Z0-9]    |
| \s     | 匹配空格、制表符、换行符(grep -P) [\t\r\n] |

例如：

- \(\) 标签  （一个标签中放一个字符串）
- \{m\} 正好匹配m次 (连续匹配)   行长度=
- \{m,\} 至少匹配m次 （连续匹配）  行长度>=m
- \{m,n\}  至少匹配m到n次     行长度  >=m and <=n
- \< 词首定位符  “\<love”       loved  lovely
- \> 词尾定位符  “love\>”       inlove

#### （3）扩展类常用元字符

| 扩展元字符 | 功能                   | 备注                                |
| ---------- | ---------------------- | ----------------------------------- |
| +          | 匹配一个或多个前导字符 | bo+ 匹配boo、bo                     |
| ？         | 匹配零个或一个前导字符 | bo？匹配b、bo                       |
| \|         | 或                     | 匹配a或b                            |
| （）       | 组字符（看成整体）     | (my\|your)seif:表示myseif或yourself |

### 2、常见的正则表达

（1）手机号和邮箱表达式

> ^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$

（2）姓名正则表达式

> ^[\u4e00-\u9fa5]{2,4}$       2-4个中文字符正则

（3）电子邮箱正则表达式

> ^\w+([-+.]\w+)@\w+([-.]\w+).\w+([-.]\w+)*$

（4）18身份证正则表达式

> 18位身份证：^[1-9]\d{5}(19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$

> 15位身份证：^[1-9]\d{5}\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{2}[0-9Xx]$

> 身份证后6位：^(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$

（5）账号密码和编码

> QQ账号：

- ^[1-9][0-9]\d{4,9}$

（6）英文账号

- ^[a-zA-Z][a-zA-Z0-9_]{4,15}$

（7）邮政编码

- ^[1-9]\d{5}$

（8）秘密

- ^[a-z0-9_-]{6,18}$

（9）URL地址

- ^(https?://)?([\da-z.-]+).([a-z.]{2,6})([/\w .-])/?$

（10）Ip地址

- ^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$
- \d+.\d+.\d+.\d+

（11）中文字符

- [\u4e00-\u9fa5]

（12）金额校验(非零开头的最多带两位小数的数字)

- ^([1-9][0-9]*)+(.[0-9]{1,2})?$

### 3、grep命令

- grep命令用来查找文件中的符合指定条件的内容。

```
grep [参数] ['正则表达式'] [文件或目录]
```

- (-i)：大小写不敏感

- (-v)：取反

- (-c)：统计匹配行数

- (-r)：递归查询

- (-n)：显示原来的行号

- (-Anum)：显示匹配内容下面的num行。

- (-num)：显示匹配内容上下的num行。

- (^)： ^'A'，显示以A开头的。

- (，显示以A结尾的。

- 例子1：查找 /root下所有包含有以p开头或者以a开头内容的文件。

  ```
  grep -r '^[pa]' /root
  ```

- 例子2：查找a.txt 中以非数字开头第二个字符是数字的内容。

  ```
  grep '^\[^0-9][0-9].*' a.txt
  ```

## 十二.sed编辑器

- sed命令和Vim命令功能上是一样的，都是对文本进行编辑，不同点是，vim是交互式的而sed命令
   是流编辑模式，这种方式的特点是，在 sed 处理数据之前，需要预先提供一组规则，sed 会按照此规则
   来编辑数据，所以sed命令也需要和正则表达式紧密配合，由正则表达式提供规则。vi命令只能交互编
   辑，grep命令只能进行查找，sed命令相当于vi+grep,不仅可以正则查找，还可以修改原文件的内容。
- 好处：sed是非交互式，所以可以在脚本文件中用编程的方式对文件的内容进行编辑操作，这是vim这种交互编辑器无法做到的。
- sed 根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件
   中，此命令执行数据的顺序如下：
  - 每次仅读取一行内容；
  - 根据提供的规则命令匹配并修改数据。注意，sed 默认不会直接修改源文件数据，而是会将数据复
     制到缓冲区中，修改也仅限于缓冲区中的数据；
  - 将执行结果输出。

### 1、命令的介绍

```
sed [选项] [脚本命令] [文件名]
```

- 成功使用 sed 命令的关键在于掌握各式各样的脚本命令及格式，它能帮你定制编辑文件的规则。

| 选项            | 含义 [sed常用选项参数及含义（更多先项参数请用帮助命令查看）] |
| --------------- | ------------------------------------------------------------ |
| -e 脚本命令     | 该选项会将其后跟的脚本命令天骄到已有的命令中。               |
| -f 脚本命令文件 | 该选项将其后文件中的脚本命令添加到已有的命令中。             |
| -n              | 默认情况下，sed会在所有的脚本指定执行完毕后，会自动输出处理后的内容，而该选项会屏蔽启动输出，需要使用print命令来完成输出 |
| -i              | 此选项会直接修改源文件，要慎用。                             |

| 脚本命令(脚本命令的含义) | 含义                                                  |
| ------------------------ | ----------------------------------------------------- |
| s                        | 替换脚本命令                                          |
| d                        | 删除                                                  |
| p                        | 打印                                                  |
| ！                       | 取反                                                  |
| g                        | 替换全部，不加g就是替换每一行的找到的第一个匹配内容。 |

- 例子1：只查找不替换时不用在命令语句中加上s参数，查找/StuLinux目录下pad文件中包含root的行。

  ```
  sed -n '/root/p' /StuLinux/pad
  ```

- 查找/StuLinux目录下pad文件中包含root的行，并在输出结果时将root中的ro替换为123。

  - 语法示例：sed -n ‘/要查找的内容/s/要替换的内容/替换后的内容/pg’ 文件名

  ```
  sed -n '/root/s/ro/123/pg' /StuLinux/pad
  ```

## 十三.awk命令

### 1、介绍

- AWK 是一种处理文本文件的语言，是一个强大的文本分析工具。 之所以叫 AWK 是因为其取了三位创始人 Alfred Aho，Peter Weinberger, 和 Brian Kernighan 的 Family Name 的首字符。
- AWK同时也是一门编程语言，也有变量、数组、判断、循环等语法，awk内置了很多实用函数，可以对
   文件进行列式处理，它把一行用分隔分隔成多个列，工作时处理完一行，再处理下一行。

### 2、语法

```
awk [参数选项] [“定址{动作}”] [操作对象]
```

- 定址：指定的匹配内容。

- 动作：指的是处理匹配的内容。

- 操作对象：文件。

- 例子1：打印passwd中以a开头，以n结尾的行，以：为分隔符的内容

  ```
  awk -F: ‘/^a.*n$/ {print $0}’ passwd
  ```

  - -F: 指定以: 号为行分隔符。
  - -f:指定脚本文件。
  - 定址由 //中的正则表达式完成，{}中是处理匹配内容的动作。
  - print 打印命令，$0的意思是打印输出所有的列。

### 3、打印命令

- awk打印分为两种：

  - print【换行打印，在每行后面自动填上一个\n回车符】
  - printtf【不换行打印】

- 在换行打印时支持输出特定格式{printf “格式”，打印的东西}

  格式符号：

  - %d【整数型】：截断小数 ，如果是字符型或者没有那会转成0
  - %s【字符型】：如果没有话处理成空
  - %f【浮点型】：默认6位小数，如果是字符型或者没有会转成0，在f前加.数字可以自定义小数位，会四舍五入
  - sprintf 采用和printf相同的方式格式化字符串，但是它不会输出格式化后的字符串，而是返回格式化后
     的字符串。所以，可以将格式化后的字符串赋值给某个变量。

- 准备：建立awkText.txt文件：内容如下：11.23:3.14159:88.66:aa:74.25

  - 案例：使用awk命令输出 1，2，5，4列 并指定小数位数。
  - 语句：awk -F: ‘{print “%.1f,%.2f,%.3f,%s\n”,2,4}’ awkTest.txt

### 4、运算符

#### （1）正则表达式

- //

#### （2）关系运算符

- \>  <  ==  !=  >=  <=
- ~匹配
- !~不匹配

#### （3）逻辑运算符

- and	&&
- or       ||
- not     !

#### （4）算术运算符

- \+  -  *  /  ^  % ()

#### （5）seq序列

- seq 序列
- seq 1  100 【#输出1-100的序列】

### 5、流程控制语句

#### （1）if语句

```
‘{ if（条件1）{动作1}
else if (条件2) {动作2}
else if (条件3) {动作3}
else {动作n}
}’
```

- 例子：在/etc/passwd文件中，如果第3列的值>10那么输出第三列，如果第三列的值除以5余数为0，那么输出
   第一列和第三列。

  ```
  awk -F: ‘{ if ($3>10){print $3} else if ($3%5==0) {print $1,$3}}’ /etc/passwd
  ```

#### （2）for语句

```
for (单次表达式;条件表达式;步长值){
循环体
}
```

## 十四.shell脚本

### 1、介绍

#### （1）说明

- shell脚本是一种计算机编程语言，它可以在Unix/Linux操作系统中运行。它是由一系列命令和控制
   结构组成的文本文件，通常使用文件扩展名.sh或.bash。
- Shell脚本的主要目的是执行命令序列，对文件进行处理以及与操作系统进行交互。Shell脚本可以自动化一些重复性工作，比如备份、系统维护、日志分析等任务。它也可以用来编写简单的工具和小型程序。Shell脚本很容易学习，因为它们使用的命令和语法与命令行界面相似，而且不需要编译即可直接运行。

#### （2）第一个shell脚本

- Shell脚本必须以#!/bin/bash开头（指定解析器）

- 创建脚本文件：touch hello.sh

- 编辑脚本文件：vim hello.sh

  ```
  #!/bing/bash
  echo "helloWorld" 
  ```

- 执行Shell脚本

  - 如果前面不加上路径名则会认为是命令而去环境变量中取找。
  - 执行时会遇到权限不够，可以用chomod 777 脚本文件，进行赋权。

  ```
  ./脚本文件
  ```

- 多命令处理脚本：可以在脚本中写入多个命令，然后执行。

### 2、变量

#### （1）系统变量

- 系统常用变量HOME、PWD、SHELL、USER等，可以通过$变量名来获取变量值：

  ```
  #!/bin/bash
  echo $HOME   // /root
  echo $PWD    // /StuLinux
  echo $SHELL  // /bin/bash
  echo $USER   // root
  ```

#### （2）自定义变量

- 自定义变量

  - 自定义变量：变量=值；
  - 自定义全部变量： export 变量；【可以在所有shell脚本中使用】
  - 撤销变量：unset值；
  - 声明静态变量：readonly变量，【注意不能使用unset】

- 变量定义规则

  - 变量名命名规则和java差不多。
  - 等号两边不能有空格，变量的值如果有空格需要用单引号或双引号括起来。
  - 在bash中，变量默认类型都是字符串类型，无法直接进行数值运算。
  - 可把变量提升为全局环境变量，可供其他Shell程序使用：export 变量名

- 特殊变量

  - $n

    - n代表数字，1-9代表第一到第九个参数，十以上的参数需要用大括号括起来${10}

    - ```
      //shell脚本:test.sh
      #!/bin/bash
      echo "$0 $1 $2"
      
      //终端
      ./test.sh a b c 
      
      //输出
      ./test.sh a b
      ```

  - $#

    - 获取参数的个数,就是调用shell脚本后面根的参数的个数。

    - ```
      //shell脚本:test.sh
      #!/bin/bash
      echo "$0 $1 $2"
      echo "param count:" $#
      
      //终端
      ./test.sh a b c 
      
      //输出
      ./test.sh a b
      param count:3
      ```

  - $*

    - 功能描述：这个变量代表命令行中所有的参数，*把所有的参数看成一个整体

  - $@

    - 功能描述：这个变量也代表命令行中所有的参数，不过@把每个参数区分对待

  - $?

    - 功能描述：最后一次执行的命令的返回状态。如果这个变量的值为0，证明上一个命令正确执行；如果这个变量的值为非0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了.

### 3、运算符

- 原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用。

- expr 是一款表达式计算工具，使用它能完成表达式的求值操作。

  - 例如，两个数相加（下面的”·“十反引号，不是单引号）
  - 表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。

  ```
  #!/bin/bash
  
  val=`expr 2 + 2`
  echo "两数之和为 : $val"
  ```

#### （1）算术运算符

- a=10 ，b=20【linxu中没有小数，10/20结果会为0】

| 运算符 | 说明                                          | 举例               |
| ------ | --------------------------------------------- | ------------------ |
| +      | 加法                                          | `expr b`值为30     |
| -      | 减法                                          | `expr b`值为-10    |
| *      | 乘法                                          | `expr b`值为200    |
| /      | 除法                                          | `expr a`值为2      |
| %      | 取余                                          | `expr b`值为0      |
| =      | 赋值                                          | a=%b将b的值赋值给a |
| ==     | 相等。用于比较两个数字，相同则返回 true。     | [ b ] 返回 false   |
| !=     | 不相等。用于比较两个数字，不相同则返回 true。 | [ b ] 返回 true    |

- 条件表达式要放在方括号之间，并且要有空格，例如: [a==﻿b] 是错误的，必须写成 [ a==﻿b ]。
- 在案例中 * 为转义了*，还原*的原本为乘的意思。

```
#!/bin/bash
a=10
b=20
if[ $a == $b ]
then
 var= ` $a \* $b `
 echo "$var"
fi
```

#### （2）关系运算符

| 运算符 | 说明                                                  | 举例                   |
| ------ | ----------------------------------------------------- | ---------------------- |
| -eq    | 检测两个数是否相等，相等返回 true。                   | [ 10 -eq 20 ]值：false |
| -ne    | 检测两个数是否不相等，不相等返回 true。               | [ 10 -ne 20 ]值：true  |
| -gt    | 检测左边的数是否大于右边的，如果是，则返回 true。     | [ 10 -gt 20 ]值：false |
| -lt    | 检测左边的数是否小于右边的，如果是，则返回 true。     | [ 10 -lt 20 ]值：true  |
| -ge    | 检测左边的数是否大于等于右边的，如果是，则返回 true。 | [ 10 -ge 20 ]值：false |
| -le    | 检测左边的数是否小于等于右边的，如果是，则返回 true。 | [ 10 -le 20 ]值：true  |

#### （3）布尔运算符

| 运算符 | 说明                                                | 举例                         |
| ------ | --------------------------------------------------- | ---------------------------- |
| ！     | 非运算，表达式为 true 则返回 false，否则返回 true。 | [ ! false ] 返回 true        |
| -o     | 或运算，有一个表达式为 true 则返回 true。           | [ true -o true ] 返回 true   |
| -a     | 与运算，两个表达式都为 true 才返回 true。           | [ true -a false ] 返回 true  |
| &&     | 逻辑的and                                           | [ true && true ] 返回 true   |
| \|\|   | 逻辑的or                                            | [ true \|\| true ] 返回 true |

#### （4）字符串运算符

- 下表列出了常用的字符串运算符，假定变量 a 为 "abc"，变量 b 为 "efg"：

| 运算符 | 说明                                         | 举例                  |
| ------ | -------------------------------------------- | --------------------- |
| =      | 检测两个字符串是否相等，相等返回 true。      | [ b ] 返回 false      |
| !=     | 检测两个字符串是否不相等，不相等返回 true。  | [ b ] 返回 true       |
| -z     | 检测字符串长度是否为0，为0返回 true。        | [ -z $a ] 返回 false  |
| -n     | 检测字符串长度是否不为 0，不为 0 返回 true。 | [ -n "$a" ] 返回 true |
| $      | 检测字符串是否不为空，不为空返回 true。      | [ $a ] 返回 true      |

#### （5）文件检测运算符

- 文件测试运算符用于检测 Unix 文件的各种属性。

| 运算符  | 说明                                                    | 举例                   |
| ------- | ------------------------------------------------------- | ---------------------- |
| -r file | 检测文件是否可读，是返回true                            | [ -r $file ] 返回 true |
| -w file | 检测文件是否可写，是返回ture                            |                        |
| -x file | 检测文件是否可执行，是返回true                          |                        |
| -s file | 检查文件是否为空(文件大小是否大于0)，不是返回ture       |                        |
| -e file | 检测文件包括目录是否存在，是返回true                    |                        |
| -b file | 检测文件是否是块设备文件，是返回 true。                 |                        |
| -c file | 检测文件是否是字符设备文件，是返回 true。               |                        |
| -d file | 检测文件是否是目录，是返回true。                        |                        |
| -f file | 文件是否是普通文件（既不是目录、设备文件）是返回 true。 |                        |

```
#!/bin/bash
file="/var/www/runoob/test.sh"
if[ -r $file ]
then
 echo "文件可读"
else
 echo "文件不可读"
fi
```

### 4、流程控制语句

- condition:(( 运算式 ))”或“[ 运算式 ]”
- f 后要有空格

#### （1）if单分支

```
if condition 
then
	command1
	command2
	...
fi
```

#### （2）if双分支

```
if condition
then
	command1
	...
else
	command2
	...
fi
```

#### （3）if多分支

```
if condition1
then
	command1
	...
elif condition2
then
	command2
	...
...
else
	commandn
fi
```

#### （4）case分支

- case..esac为多选择语句，可其他与的switch..case语句类似；；代表break语句。

```
case 值 in
模式1)
`	command1
	...
	;;
模式2)
`	command1
	...
	;;
...
esac
```

#### （5）for循环

- 一般格式：

  ```
  for 变量 in 值1 值2 ...
  do
  	command...
  done
  ```

  ```
  for int in 1 2 3 4 
  do 
  	echo $int
  done
  ```

- 类似于java的模式

  ```
  for((初始值;循环控制语句;步长))
  do
  	command..
  done
  ```

  ```
  for((int=0;i<=4;i++))
  do
  	command...
  done
  ```

#### （6）while循环

- 条件为true是就一直循环

```
while [ condition ]
do
	command
done
```

#### （7）until循环

- 条件为true时停止循环

```
until [ condition ]
do
	command
done
```

#### （8）break和contion语句

- 和java差不多。

### 5、函数

#### （1）系统函数

- basename
  - 命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来。suffix为后缀，会将后缀剔除掉。

```
basename [string/pathname] [suffix]
basename /etc/hello/new.sh 		//new.sh
basename /etc/hello/new.sh .sh  //new
```

- dirname
  - 剔除掉文件非目录的部分，将目录返回。

```
dirname [String/pathname]
dirname /etc/hello/new.sh .sh 	// /etc/hello
```

#### （2）自定义函数

```
[function] funname[()]
{
	Action;
	[return int;]
}
function sum(){
 s=0
 echo "$s"
}
```

> 先声明后使用，shell不想编程语言一样，shell脚本时按顺序执行的
>
> 函数返回值如果没有指定，则是最后一条执行的命令，可以return后面跟一个数字

## 十五.网络请求和下载

### 1.ping命令

- ip地址和主机名称

  介绍：可以通过命令ifconfig查看本机的ip地址，如果没有此命令需安装：yum -y install net-tools

  > 查看自己的主机名称：
  >
  > ```
  > hostname
  > ```

  > 修改主机名：把主机名称修改为centos:
  >
  > ```
  > hostnamectl set-hostname centos;
  > ```

  查看本机的dsn记录：

  > - win中查看：c:/windwos/system32/drivers/etc/hosts
  > - linux查看：/etc/hosts
  > - 配置本地的记录：打开文件夹进行修改ip地址  主机名或者域名，修改这个文件需要更高的权限
  >
  > 什么是域名解析（主机的映射）：可以通过主机名找到对应的ip地址

- ping命令

  介绍：可以通过ping命令，检查指定的网络服务器是否可以联通状态

  ```
  ping [-c num ] ip或主机名
  ```

  > 选项：【-c】指定检查的字数，没有此参数将无限的ping

  ```
  //列子
  ping www.baidu.com
  ```

### 2.yum命令

- 软件下载

  > (全称为 Yellow dogUpdater, Modified)是一个在Fedora和RedHat以及CentOS中的Shell前端。软件包管理器。基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性。【yum：rpm包软件管理器，用于自动化安装配置linux软件，并可以自动解决依赖问题。】

  ```linux
  yum [-y] <install | remove | search | update> 软件名称
  ```

  > 参数：【-y】：自动确认，无需手动取人安装或卸载过程。
  >
  > 操作：
  >
  > 【install】安装软件【remove】卸载软件【search】搜索软件
  >
  > 【update】更新软件，更新软件不用-y参数
  >
  > 注意：该命令需要联网，且需要root权限，su命令切换到root用户或使用sudo授权

- 列出软件

  ```linux
  yum list [info] [updates | installed]
  ```

  1. 【空白】列出所有可安装的软件包
  2. 【update】列出所有可更新的软件包
  3. 【installed】列出所有已安装的软件包
  4. 【info】需要配合update和installed操作，将列出软件更新包和安装包的信息。

- 清除缓存

  ```
  yum clean all
  yum makecache
  ```

> apt命令拓展：
>
> 前面的linux命令式通用的，但软件安装centOS和ubuntu使用的不同的包管理器，centOS使用的是yum管理器，ubuntu使用的是apt管理器。
>
> ```
> apt [-y] [install | remove | search] 软件名称
> ```
>
> 说明：用法和yum一致，同样需要root权限

### 2.yum源的配置

- yum源分为本地yum源和远程yum源两个部分。
  - yum源配置文件： /etc/yum.conf
  - yum客户端配置文件: /etc/yum.repos.d/base.repo
- 配置YUM源文件的主要配置项：
  - [base]：代表仓库名称，名称可以随意取
  - name：描述仓库含义
  - mirrorlist：列出这个可以使用的镜像站点，如果不想使用，可以注释
  - baseurl：后面接仓库地址，mirrorlist是由yum程序自行找镜像站点，baseurl则是指定一个固定容器地址
  - enabled：是否使用这个仓库
  - gpgcheck：是否需要查阅RPM文件内数字证书
  - gpgkey：数字证书公钥文件所在位置，使用默认值

### 3.ping命令

#### （1）本地yum配置

- 本地yum源是指软件仓库的位置在本地设备上，可以本机硬盘的某个目录中，本机光驱的某目中。 ** 构建本地仓库的配置，软件源位于光驱中。**

- 挂载光盘

  - 将iso文件放入到虚拟机光驱
  - mount /dev/sr0 /mnt(或者是其它的目标路径)

- 配置base.repo文件

  - 通过vim编辑器新建base.repo文件。

    ```
    [root@test packages]# vim /etc/yum.repos.d/base.repo
    [base]
    name=base
    baseurl=file:///mnt(光盘挂载路径中软件源的位置)
    enabled=1
    gpgcheck=0
    ```

- 首先清除yum缓存，然后执行yumlist命令，然后就可以通过yum命令进行安装。
